--CODIGO AINDA NAO RODA, PRECISA DE ALTERACOES RELACIONADAS A FOREIGN KEY
--FOREIGN KEY A SER COLOCADA: OS FORNECEDORES FORNECEM QUAIS MATERIAS PRIMA

CREATE TABLE IF NOT EXISTS FORNECEDORES (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL,
    CNPJ NUMBER NOT NULL
);

CREATE TABLE IF NOT EXISTS MATERIAPRIMA (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL,
    ESTOQUEMINIMO NUMBER NOT NULL,
    ESTOQUEMEDIO NUMBER NOT NULL, 
    ESTOQUEMAXIMO NUMBER NOT NULL,
    FORNECEDOR REFERENCES FORNECEDORES(FORNECEDORES.ID)
);

CREATE TABLE IF NOT EXISTS PRODUTOS (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL,
    PRECOKG NUMBER NOT NULL,
    LOTE NUMBER NOT NULL,
    TIPO NUMBER REFERENCES TIPOS(TIPOS.ID),
    ESTOQUEMEDIO NUMBER NOT NULL,
    ESTOQUEMINIMO NUMBER NOT NULL,
    ESTOQUEMAXIMO NUMBER NOT NULL 
);

CREATE TABLE IF NOT EXISTS TIPO (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL,
);

CREATE TABLE IF NOT EXISTS CLIENTES (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL, 
    ENDERECO VARCHAR2(100) NOT NULL, 
    CPF NUMBER CHECK((CLIENTES.CNPJ) = TRUE),
    CNPJ NUMBER CHECK ((CLIENTES.CPF) = TRUE),
    TICKETMEDIO NUMBER
);

CREATE TABLE IF NOT EXISTS FUNCIONARIOS (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL, 
    CARGO VARCHAR(100) NOT NULL,
    CPF NUMBER NOT NULL,
    ENDERECO VARCHAR2(100) NOT NULL
);

CREATE TABLE IF NOT EXISTS TRANSPORTADORAS (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL,
    REGIAO VARCHAR(100) NOT NULL,
    TICKETMEDIO NUMBER,
    CNPJ NUMBER NOT NULL,
    ENTREGASREALIZADAS NUMBER
);

CREATE TABLE IF NOT EXISTS PEDIDOS (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    DATAPEDIDO DATE NOT NULL,
    DATAENTREGA DATE NOT NULL,
    PRODUTOS NUMBER REFERENCES PRODUTOS(PRODUTOS.ID),
    TRANSPORTADORA NUMBER REFERENCES TRANSPORTADORA(TRANSPORTADORA.ID),
    FUNCIONARIO NUMBER REFERENCES FUNCIONARIO(FUNCIONARIO.ID),
    CLIENTE NUMBER REFERENCES CLIENTES(CLIENTES.ID)
);

CREATE TABLE IF NOT EXISTS MATERIAPRIMA (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL,
    ESTOQUEMINIMO NUMBER NOT NULL,
    ESTOQUEMEDIO NUMBER NOT NULL, 
    ESTOQUEMAXIMO NUMBER NOT NULL,
    FORNECEDOR REFERENCES FORNECEDORES(FORNECEDOR.ID)
);


